# Server Configuration
PORT=3000

# Timezone (Europe/London for UK banking)
TZ=Europe/London

# Run mode: live (real API calls) or dummy (fake data for testing)
MODE=live

# TrueLayer Credentials
# Get these from: https://console.truelayer.com/
TL_CLIENT_ID=your_client_id_here
TL_CLIENT_SECRET=your_client_secret_here
TL_REDIRECT_URI=http://localhost:3000/callback

# TrueLayer URLs
TL_AUTH_BASE=https://auth.truelayer.com
TL_TOKEN_URL=https://auth.truelayer.com/connect/token
TL_API_BASE=https://api.truelayer.com

# Scopes (defined in the auth link - TrueLayer confirmed scopes belong in the link, not Console UI)
# Space-separated list of permissions
TL_SCOPES=accounts cards transactions balance offline_access

# Providers filter (optional - LEAVE BLANK to allow all providers including cards)
# IMPORTANT: American Express is a card provider. Setting this parameter can exclude cards.
# Recommended: Leave blank (commented out) to show ALL available providers including Amex
# TL_PROVIDERS=

# Transaction Window Configuration
# Weekly: Number of days to fetch (default: 7 for last week)
WEEKLY_DAYS=7

# Monthly: Number of months back (default: 1 for previous full month)
MONTHLY_MONTHS=1

# Token Storage Path (relative to project root)
TOKEN_PATH=.truelayer-token.json

# Google Sheets Configuration (Optional - for excluded expenses tracking)
# Leave blank to skip Google Sheets integration
# Required columns: Date | Vendor | Amount (Optional: Note)
GOOGLE_SHEETS_SPREADSHEET_ID=your-spreadsheet-id-here
GOOGLE_SHEETS_RANGE=Excluded Expenses!A:D
GOOGLE_APPLICATION_CREDENTIALS=./gcp-service-account.json

# Authentication (Basic Login Protection)
# Set these to enable password-protected access to the app
ADMIN_EMAIL=your@email.com
ADMIN_PASSWORD=your-strong-password-here

# Session Secret (for secure sessions)
SESSION_SECRET=change-this-to-a-random-string

# OpenAI Configuration (Optional - for AI-powered insights and categorization)
# Get your API key from: https://platform.openai.com/api-keys
# If not set, the app will still work but won't show AI-generated categories or 'advice'
# You'll see a "Generate AI Insights" button on transaction pages to use this feature
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-3.5-turbo

# Financial Advisor Prompt Template
# Edit 'financial-advisor-prompt.txt' in the root directory to customize AI analysis
# Do NOT edit the prompt formatting requirements - those are injected automatically

# ═══════════════════════════════════════════════════════════════════════
# Email Configuration - Choose ONE of the following options:
# ═══════════════════════════════════════════════════════════════════════

# ────────────────────────────────────────────────────────────────────────
# OPTION 1: Gmail OAuth2 (RECOMMENDED - Best deliverability, no spam)
# ────────────────────────────────────────────────────────────────────────
# Follow these steps to set up Gmail OAuth2:
#
# 1. Go to Google Cloud Console: https://console.cloud.google.com/
# 2. Create a new project (or use existing)
# 3. Enable Gmail API:
#    - Go to "APIs & Services" → "Library"
#    - Search for "Gmail API" and click "Enable"
# 4. Create OAuth2 Credentials:
#    - Go to "APIs & Services" → "Credentials"
#    - Click "Create Credentials" → "OAuth client ID"
#    - Application type: "Desktop app" (or "Web application" if you prefer)
#    - Name: "Budgeter Email"
#    - Click "Create"
#    - Save the Client ID and Client Secret
# 5. Get Refresh Token:
#    - Use the OAuth2 Playground: https://developers.google.com/oauthplayground/
#    - Click gear icon (⚙️) → Check "Use your own OAuth credentials"
#    - Enter your Client ID and Client Secret
#    - In "Step 1", enter: https://mail.google.com/
#    - Click "Authorize APIs" and log in with your Gmail account
#    - In "Step 2", click "Exchange authorization code for tokens"
#    - Copy the "Refresh token" (starts with "1//...")
# 6. Paste credentials below:

GMAIL_USER=your@gmail.com
GMAIL_CLIENT_ID=your-client-id.apps.googleusercontent.com
GMAIL_CLIENT_SECRET=your-client-secret
GMAIL_REFRESH_TOKEN=1//your-refresh-token

# Optional: Access token (will be auto-generated from refresh token if not provided)
# GMAIL_ACCESS_TOKEN=ya29.your-access-token

# ────────────────────────────────────────────────────────────────────────
# OPTION 2: Basic SMTP (Fallback for non-Gmail or legacy setup)
# ────────────────────────────────────────────────────────────────────────
# Uncomment these lines if you prefer basic SMTP authentication
# NOTE: Gmail requires "App Passwords" (not your regular password)
# Get an App Password: https://support.google.com/accounts/answer/185833

# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your@gmail.com
# SMTP_PASS=your-16-char-app-password
# MAIL_FROM=your@gmail.com

# Other SMTP providers:
# - Outlook: smtp-mail.outlook.com:587
# - Yahoo: smtp.mail.yahoo.com:587
# - SendGrid: smtp.sendgrid.net:587
# - Custom SMTP: Use your provider's settings

# ────────────────────────────────────────────────────────────────────────
# Alert Recipients (comma-separated list for multiple recipients)
# ────────────────────────────────────────────────────────────────────────
ALERT_EMAIL_TO=recipient@email.com
# For multiple recipients: ALERT_EMAIL_TO=person1@email.com,person2@email.com,person3@email.com

# Cron Schedules (Optional - enable automated email alerts)
# Leave commented to disable automated alerts (can still send manually from Settings)
# IMPORTANT: As transactions arnt pulled through with times, range is calculated :
#            all transactions between current date (inclusive) to current date minus 6 days
# Uncomment and set to enable:
# WEEKLY_CRON_SCHEDULE=30 20 * * 7    # Sunday at 8:30 PM
# MONTHLY_CRON_SCHEDULE=0 8 1 * *   # 1st of month at 8:00 AM

# Budget Settings (Optional - defaults apply if not set)
# Weekly spending allowance (default: £100)
WEEKLY_ALLOWANCE=100

# Monthly spending allowance (default: 4x weekly allowance)
# If not set, automatically calculated as WEEKLY_ALLOWANCE × 4
MONTHLY_ALLOWANCE=400

# Large transaction threshold (default: £100)
# Transactions above this amount are excluded from budget analysis
LARGE_TRANSACTION_THRESHOLD=100
